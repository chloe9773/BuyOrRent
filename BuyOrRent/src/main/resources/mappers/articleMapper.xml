<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="article">
	<!-- 게시글 insert -->
	<insert id="setArticle" parameterType="articlevo">
		INSERT INTO article SET 
			board_id = #{boardId},
			article_type = #{articleType},
			article_title = #{title},
			article_author = #{author},
			article_date = now(),
			content = #{content}
	</insert>
	
	<!-- 게시글 하나 불러오기 -->
	<select id="getArticleOne" parameterType="int" resultType="articlevo">
		SELECT
			board_id as boardId,  
			article_id as articleId,
			article_type as articleType,
			article_title as title,
			article_author as author,
			article_date as uploadDate,
			article_update as updateDate,
			article_hit as hit,
			article_comments as commentTotal,
			content 
		FROM article WHERE article_id = #{articleId}
	</select>
	
	<!-- 게시판별 게시글 불러오기(공지게시글) -->
	<select id="getNotiArticleForBoard" parameterType="int" resultType="articlevo">
		SELECT 
			article_id as articleId,
			article_type as articleType,
			article_title as title,
			article_author as author,
			article_date as uploadDate,
			article_hit as hit,
			article_comments as commentTotal,
			content 
		FROM article WHERE board_id = #{boardId} and article_type != 'general' ORDER BY article_id
	</select>
	
	<!-- 게시판별 게시글 불러오기(일반게시글) -->
	<select id="getAllArticleForBoard" parameterType="hashmap" resultType="articlevo">
		SELECT 
			article_id as articleId,
			article_type as articleType,
			article_title as title,
			article_author as author,
			article_date as uploadDate,
			article_hit as hit,
			article_comments as commentTotal,
			content 
		FROM article WHERE board_id = #{id} and article_type != 'noti' ORDER BY article_id DESC LIMIT #{start}, #{end}
	</select>
	
	<!-- 게시글 삭제 -->
	<delete id="deleteArticleOne" parameterType="int">
		DELETE FROM article WHERE article_id = #{articleId}
	</delete>
	
	<!-- 게시글 수정 -->
	<update id="updateArticleOne" parameterType="articlevo">
		UPDATE article SET 
			article_title = #{title},
			article_update = now(),
			content = #{content} 
		WHERE article_id = #{articleId}
	</update>
</mapper> 